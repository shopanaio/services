"""
Price adjustment type for child items in a bundle.
Values are always positive - the type determines the operation.
"""
enum ChildPriceType {
  """Item is free (price = 0)"""
  FREE

  """Use original price without adjustments"""
  BASE

  """Subtract fixed amount from original price"""
  DISCOUNT_AMOUNT

  """Subtract percentage from original price"""
  DISCOUNT_PERCENT

  """Add fixed amount to original price"""
  MARKUP_AMOUNT

  """Add percentage to original price"""
  MARKUP_PERCENT

  """Override with fixed price"""
  OVERRIDE
}

"""
Price adjustment configuration applied to a child line item.
"""
type CheckoutLinePriceConfig {
  """Type of price adjustment."""
  type: ChildPriceType!

  """Amount in minor units (always positive). Used for DISCOUNT_AMOUNT, MARKUP_AMOUNT, OVERRIDE."""
  amount: Int

  """Percentage (always positive). Used for DISCOUNT_PERCENT, MARKUP_PERCENT."""
  percent: Float
}

"""
A single item in a checkout.
"""
type CheckoutLine implements Node @key(fields: "id") {
  """
  Global unique identifier for the checkout line.
  """
  id: ID!

  """
  Title of the purchasable.
  """
  title: String!

  """
  SKU of the purchasable.
  """
  sku: String

  """
  Image URL of the purchasable.
  """
  imageSrc: String

  """
  Quantity of the item being purchased.
  """
  quantity: Int!

  """
  Cost calculations for this checkout item.
  """
  cost: CheckoutLineCost!

  """
  Original price before any adjustments (e.g., child price config).
  """
  originalPrice: Money!

  """
  Price adjustment applied to this line (for child items in bundles).
  """
  priceConfig: CheckoutLinePriceConfig

  """
  A list of components that make up this checkout line, such as individual products in a bundle.
  """
  children: [CheckoutLine!]!
  """
  ID of the purchasable.
  """
  purchasableId: ID!
  """
  Purchasable snapshot data at the time of adding to checkout.
  """
  purchasableSnapshot: JSON!
  """
  Optional tag assigned to this checkout line.
  """
  tag: CheckoutTag
}

"""
Detailed breakdown of costs for a checkout line item
"""
type CheckoutLineCost {
  """
  The original list price per unit before any discounts.
  """
  compareAtUnitPrice: Money!

  """
  The current price per unit before discounts are applied (may differ from compareAt price if on sale).
  """
  unitPrice: Money!

  """
  Discount amount applied to a line.
  """
  discountAmount: Money!

  """
  Total cost of all units before discounts.
  """
  subtotalAmount: Money!

  """
  Total tax amount applied to the checkout line.
  """
  taxAmount: Money!

  """
  Total cost of this line (all units), after discounts and taxes.
  """
  totalAmount: Money!
}

"""
Input data for a child item in a bundle.
Price configuration is automatically taken from ProductGroup in the database.
"""
input CheckoutChildLineInput {
  """
  Quantity of the child item.
  """
  quantity: Int!

  """
  ID of the purchasable for child item.
  Must be a variant that exists in parent product's groups.
  """
  purchasableId: ID!

  """
  Snapshot data for child purchasable.
  """
  purchasableSnapshot: PurchasableSnapshotInput
}

"""
Input data for a single item in the checkout.
"""
input CheckoutLineAddInput {
  """
  Quantity of the product in the checkout.
  """
  quantity: Int!
  """
  ID of the product to add or update.
  """
  purchasableId: ID!
  """
  ID of the purchasable snapshot to add or update.
  """
  purchasableSnapshot: PurchasableSnapshotInput
  """
  Optional tag slug to associate with this line.
  """
  tagSlug: String
  """
  Child items for this line. If provided, this line becomes a parent.
  """
  children: [CheckoutChildLineInput!]
}

"""
Input data for adding an item to an existing checkout.
"""
input CheckoutLinesAddInput {
  """
  ID of the checkout.
  """
  checkoutId: ID!
  """
  List of checkout items to add.
  """
  lines: [CheckoutLineAddInput!]!
}

"""
Input data for updating the quantity of a specific checkout item.
"""
input CheckoutLinesUpdateInput {
  """
  ID of the checkout.
  """
  checkoutId: ID!
  """
  List of checkout items to update.
  """
  lines: [CheckoutLineUpdateInput!]!
}

"""
Input data for updating the quantity of a specific checkout item.
"""
input CheckoutLineUpdateInput {
  """
  ID of the checkout item to update.
  """
  lineId: ID!
  """
  New quantity for the checkout item.
  If set to 0, the item will be removed.
  """
  quantity: Int!
}

"""
Input data for removing one or more items from the checkout.
"""
input CheckoutLinesDeleteInput {
  """
  ID of the checkout.
  """
  checkoutId: ID!
  """
  IDs of the lines to remove.
  """
  lineIds: [ID!]!
}

"""
Input data for clearing all items from a checkout.
"""
input CheckoutLinesClearInput {
  """
  ID of the checkout to clear.
  """
  checkoutId: ID!
}

"""
Payload returned after adding an item to the checkout.
"""
type CheckoutLinesAddPayload {
  """
  The updated checkout.
  """
  checkout: Checkout
  """
  List of field-specific or general errors.
  """
  errors: [CheckoutFieldError!]
}

"""
Payload returned after updating a checkout item's quantity.
"""
type CheckoutLinesUpdatePayload {
  """
  The updated checkout.
  """
  checkout: Checkout
  """
  List of field-specific or general errors.
  """
  errors: [CheckoutFieldError!]
}

"""
Input data for replacing one or more checkout lines.
Each replacement moves quantity from source line to target line.
If quantity is not provided, full quantity from the source line will be moved.
"""
input CheckoutLinesReplaceInput {
  """
  ID of the checkout.
  """
  checkoutId: ID!
  """
  List of replacement operations to apply.
  """
  lines: [CheckoutLineReplaceInput!]!
}

"""
Single replacement operation.
"""
input CheckoutLineReplaceInput {
  """
  Source line ID to replace (quantity will be moved from this line).
  """
  lineId: ID!
  """
  Target purchasable ID to receive the quantity.
  """
  purchasableId: ID!
  """
  Quantity to move; if not set, moves full quantity from source line.
  Must be greater than 0 if provided.
  """
  quantity: Int
}

"""
Payload returned after replacing one checkout line with another.
"""
type CheckoutLinesReplacePayload {
  """
  The updated checkout.
  """
  checkout: Checkout
  """
  List of field-specific or general errors.
  """
  errors: [CheckoutFieldError!]
}

"""
Payload returned after removing an item from the checkout.
"""
type CheckoutLinesDeletePayload {
  """
  The updated checkout.
  """
  checkout: Checkout
  """
  List of field-specific or general errors.
  """
  errors: [CheckoutFieldError!]
}

"""
Payload returned after clearing all items from the checkout.
"""
type CheckoutLinesClearPayload {
  """
  The updated (now empty) checkout.
  """
  checkout: Checkout
  """
  List of field-specific or general errors.
  """
  errors: [CheckoutFieldError!]
}

input PurchasableSnapshotInput {
  """
  SKU of the purchasable snapshot.
  """
  sku: String
  """
  Title of the purchasable snapshot.
  """
  title: String!
  """
  Image URL of the purchasable snapshot.
  """
  imageUrl: String
  """
  JSON data of the purchasable snapshot.
  """
  data: JSON
}
